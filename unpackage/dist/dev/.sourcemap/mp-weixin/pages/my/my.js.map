{"version":3,"file":"my.js","sources":["pages/my/my.vue","../../../HBuilderX.3.3.11.20220209/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<template>\n\t<view class=\"my-containter\">\n\t\t<view class=\"containter-top\">\n\t\t\t<view class=\"top-btn\">\n\t\t\t\t<view class=\"btn-left\">\n\t\t\t\t\t<up-icon name=\"gift-fill\" color=\"#fff\" size=\"28\"></up-icon>\n\t\t\t\t\t<span>签到</span>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"btn-right\">\n\t\t\t\t\t<up-icon name=\"setting\" color=\"#fff\" size=\"28\"></up-icon>\n\t\t\t\t\t<up-icon name=\"chat\" color=\"#fff\" size=\"28\"></up-icon>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"top-card\">\n\t\t\t\t<view class=\"card-user\">\n\t\t\t\t\t<view @click=\"toLogin\" class=\"user-avator\" style=\"margin-right: 20rpx\">\n\t\t\t\t\t\t<image v-if=\"!userInfo.avatarUrl\" src=\"/static/tt.jpg\" mode=\"\"></image>\n\t\t\t\t\t\t<image v-else :src=\"userInfo.avatarUrl\" mode=\"\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view v-if=\"!userInfo.nickName\" class=\"user-name\">登录 / 注册</view>\r\n\t\t\t\t\t<view v-else class=\"user-name\">{{userInfo.nickName}}</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"card-info\">\n\t\t\t\t\t<view class=\"info-praise\">\n\t\t\t\t\t\t<span class=\"count\">12</span>\n\t\t\t\t\t\t<span class=\"name\">点赞</span>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"info-praise\">\n\t\t\t\t\t\t<span class=\"count\">12</span>\n\t\t\t\t\t\t<span class=\"name\">点赞</span>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"info-praise\">\n\t\t\t\t\t\t<span class=\"count\">12</span>\n\t\t\t\t\t\t<span class=\"name\">点赞</span>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"info-praise\">\n\t\t\t\t\t\t<span class=\"count\">12</span>\n\t\t\t\t\t\t<span class=\"name\">点赞</span>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"container-list\">\n\t\t\t<view class=\"list-item\">\n\t\t\t\t<view class=\"item-left\">\n\t\t\t\t\t<up-icon name=\"photo\" color=\"##959495\"></up-icon>\n\t\t\t\t\t<span style=\"margin-left: 10rpx\">个人信息</span>\n\t\t\t\t</view>\n\t\t\t\t<div class=\"item-right\">\n\t\t\t\t\t<span style=\"margin-right: 10rpx\">右侧文字</span>\n\t\t\t\t\t<up-icon name=\"arrow-right\" color=\"##959495\"></up-icon>\n\t\t\t\t</div>\n\t\t\t</view>\n\t\t\t<view class=\"list-item\">\n\t\t\t\t<view class=\"item-left\">\n\t\t\t\t\t<up-icon name=\"photo\" color=\"##959495\"></up-icon>\n\t\t\t\t\t<span style=\"margin-left: 10rpx\">个人信息</span>\n\t\t\t\t</view>\n\t\t\t\t<div class=\"item-right\">\n\t\t\t\t\t<span style=\"margin-right: 10rpx\">右侧文字</span>\n\t\t\t\t\t<up-icon name=\"arrow-right\" color=\"##959495\"></up-icon>\n\t\t\t\t</div>\n\t\t\t</view>\n\t\t\t<view class=\"list-item\">\n\t\t\t\t<view class=\"item-left\">\n\t\t\t\t\t<up-icon name=\"photo\" color=\"##959495\"></up-icon>\n\t\t\t\t\t<span style=\"margin-left: 10rpx\">个人信息</span>\n\t\t\t\t</view>\n\t\t\t\t<div class=\"item-right\">\n\t\t\t\t\t<span style=\"margin-right: 10rpx\">右侧文字</span>\n\t\t\t\t\t<up-icon name=\"arrow-right\" color=\"##959495\"></up-icon>\n\t\t\t\t</div>\n\t\t\t</view>\n\t\t\t<view class=\"list-item\">\n\t\t\t\t<view class=\"item-left\">\n\t\t\t\t\t<up-icon name=\"photo\" color=\"##959495\"></up-icon>\n\t\t\t\t\t<span style=\"margin-left: 10rpx\">个人信息</span>\n\t\t\t\t</view>\n\t\t\t\t<div class=\"item-right\">\n\t\t\t\t\t<span style=\"margin-right: 10rpx\">右侧文字</span>\n\t\t\t\t\t<up-icon name=\"arrow-right\" color=\"##959495\"></up-icon>\n\t\t\t\t</div>\n\t\t\t</view>\n\t\t\t<view class=\"list-item\">\n\t\t\t\t<view class=\"item-left\">\n\t\t\t\t\t<up-icon name=\"photo\" color=\"##959495\"></up-icon>\n\t\t\t\t\t<span style=\"margin-left: 10rpx\">个人信息</span>\n\t\t\t\t</view>\n\t\t\t\t<div class=\"item-right\">\n\t\t\t\t\t<span style=\"margin-right: 10rpx\">右侧文字</span>\n\t\t\t\t\t<up-icon name=\"arrow-right\" color=\"##959495\"></up-icon>\n\t\t\t\t</div>\n\t\t\t</view>\n\t\t</view>\n\t\t<up-popup :show=\"isShowPopup\" round=\"20\">\n\t\t\t<view class=\"popup\">\n\t\t\t\t<view class=\"popup-title\">\n\t\t\t\t\t<span>获取您的昵称、头像</span>\n\t\t\t\t\t<span @click=\"isShowPopup = false\" style=\"float: right; padding-right: 20rpx\">×</span>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"popup-avatar\">\n\t\t\t\t\t<view class=\"avatar-label\">获取用户头像</view>\n\t\t\t\t\t<button open-type=\"chooseAvatar\" @chooseavatar=\"onchooseavatar\">\n\t\t\t\t\t\t<image class=\"avatar-img\" :src=\"userInfo.avatarUrl\"></image>\n\t\t\t\t\t</button>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"popup-name\">\n\t\t\t\t\t<view class=\"name-label\">获取用户名称：</view>\n\t\t\t\t\t<input @input=\"changeName\" v-model=\"userInfo.nickName\" type=\"nickname\" />\n\t\t\t\t</view>\n\t\t\t\t<button size=\"default\" type=\"primary\" @click=\"submit\">确定</button>\n\t\t\t</view>\n\t\t</up-popup>\n\t</view>\n</template>\n\n<script setup>\nimport { onLoad } from '@dcloudio/uni-app';\nimport { getUserInfo, login } from '../../api/api';\nimport { reactive, ref } from 'vue';\n\n// 控制弹出层\nconst isShowPopup = ref(false);\n// 关闭弹出层\nconst close = () => {\n\tisShowPopup.value = false;\n};\n// 选择头像\nconst onchooseavatar = (e) => {\n\tuserInfo.value.avatarUrl = e.detail.avatarUrl;\n};\n// 选择姓名\nconst changeName = (e) => {\n\tuserInfo.value.nickName = e.detail.value;\n};\n// 更改用户信息\nconst submit = () => {\n\tuni.setStorageSync('userInfo', JSON.stringify(userInfo.value));\n\tisShowPopup.value = false;\n};\n\n// 用户信息\nconst userInfo = ref({\n\tavatarUrl: '',\n\tnickName: ''\n});\n// 微信授权\nconst toLogin = () => {\n\tuni.showModal({\n\t\ttitle: '温馨提示',\n\t\tcontent: '亲，授权登录微信后才能正常实现小程序',\n\t\tsuccess: (res) => {\n\t\t\tif (res.confirm) {\n\t\t\t\tuni.login({\n\t\t\t\t\tsuccess: async (data) => {\n\t\t\t\t\t\tconst { token } = await login(data.code);\n\t\t\t\t\t\tuni.setStorageSync('token', token);\n\t\t\t\t\t\tconst result = await getUserInfo();\n\t\t\t\t\t\tuserInfo.value.avatarUrl = result.avatarUrl;\n\t\t\t\t\t\tisShowPopup.value = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n};\r\n\r\nonLoad(async()=>{\r\n\tif(uni.getStorageSync('token') && !uni.getStorageSync('userInfo')){\r\n\t\tconst {avatarUrl,nickName} = await getUserInfo()\r\n\t\tuserInfo.value.avatarUrl = avatarUrl\r\n\t\tuserInfo.value.nickName = nickName\r\n\t}else if(uni.getStorageSync('token') && uni.getStorageSync('userInfo')){\r\n\t\tconst {avatarUrl,nickName} = JSON.parse(uni.getStorageSync('userInfo'))\r\n\t\tuserInfo.value.avatarUrl = avatarUrl\r\n\t\tuserInfo.value.nickName = nickName\r\n\t}\r\n})\n</script>\n\n<style lang=\"scss\">\n.my-containter {\n\twidth: 100%;\n\theight: 100vh;\n\tpadding: 20rpx;\n\tbox-sizing: border-box;\n\tbackground-color: #f8f8f8;\n\t.containter-top {\n\t\twidth: 100%;\n\t\theight: 300rpx;\n\t\tbackground-color: #52a7f9;\n\t\tbox-sizing: border-box;\n\t\t.top-btn {\n\t\t\twidth: 94%;\n\t\t\theight: 80rpx;\n\t\t\tpadding: 60rpx 20rpx;\n\t\t\tmargin: 0 auto;\n\t\t\tbox-sizing: border-box;\n\t\t\tbackground-color: #52a7f9;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tcolor: #fff;\n\t\t\t.btn-left {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t\t.btn-right {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t}\n\t\t.top-card {\n\t\t\twidth: 94%;\n\t\t\theight: 300rpx;\n\t\t\tmargin: 20rpx auto;\n\t\t\tbackground-color: #fff;\n\t\t\tborder-radius: 10rpx;\n\t\t\tbox-sizing: border-box;\n\t\t\t.card-user {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 50%;\n\t\t\t\tpadding: 20rpx;\n\t\t\t\tpadding-bottom: 0;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\t.user-avator {\n\t\t\t\t\twidth: 110rpx;\n\t\t\t\t\theight: 110rpx;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\tbackground-color: orange;\n\t\t\t\t\timage {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.user-name {\n\t\t\t\t}\n\t\t\t}\n\t\t\t.card-info {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 50%;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: space-around;\n\t\t\t\t.info-praise {\n\t\t\t\t\twidth: 80rpx;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.container-list {\n\t\twidth: 100%;\n\t\tmargin-top: 200rpx;\n\t\tbox-sizing: border-box;\n\t\t.list-item {\n\t\t\twidth: 100%;\n\t\t\theight: 80rpx;\n\t\t\tbox-sizing: border-box;\n\t\t\tpadding: 10rpx 20rpx;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tmargin-bottom: 6rpx;\n\t\t\tbackground-color: #fff;\n\t\t\tfont-size: 26rpx;\n\t\t\t.item-left {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t\t.item-right {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t}\n\t}\n\t.popup {\n\t\tpadding: 20rpx;\n\t\tborder-radius: 20rpx 20rpx 0 0;\n\t\t.popup-title {\n\t\t\twidth: 100%;\n\t\t\ttext-align: center;\n\t\t\tmargin-bottom: 20rpx;\n\t\t\tfont-size: 40rpx;\n\t\t}\n\t\t.popup-avatar {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: flex-start;\n\t\t\tborder-bottom: 1px solid #f5f5f5;\n\t\t\tpadding: 24rpx 0;\n\t\t\tbutton {\n\t\t\t\tborder: none;\n\t\t\t\tborder-radius: 10rpx;\n\t\t\t\twidth: 70rpx;\n\t\t\t\theight: 70rpx;\n\t\t\t\tmargin-left: 20rpx;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 0;\n\t\t\t\timage {\n\t\t\t\t\twidth: 70rpx;\n\t\t\t\t\theight: 70rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t.popup-name {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tborder-bottom: 1px solid #f5f5f5;\n\t\t\tpadding: 24rpx 0;\n\t\t}\n\t}\n}\n.u-safe-bottom {\n\tdisplay: none;\n}\n</style>\n","import MiniProgramPage from 'D:/搜狗高速下载/贪吃蛇/blog/旅游App项目/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","login","getUserInfo","onLoad","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;;AA0HA,UAAM,cAAcA,cAAAA,IAAI,KAAK;AAM7B,UAAM,iBAAiB,CAAC,MAAM;AAC7B,eAAS,MAAM,YAAY,EAAE,OAAO;AAAA,IACrC;AAEA,UAAM,aAAa,CAAC,MAAM;AACzB,eAAS,MAAM,WAAW,EAAE,OAAO;AAAA,IACpC;AAEA,UAAM,SAAS,MAAM;AACpBC,oBAAG,MAAC,eAAe,YAAY,KAAK,UAAU,SAAS,KAAK,CAAC;AAC7D,kBAAY,QAAQ;AAAA,IACrB;AAGA,UAAM,WAAWD,cAAAA,IAAI;AAAA,MACpB,WAAW;AAAA,MACX,UAAU;AAAA,IACX,CAAC;AAED,UAAM,UAAU,MAAM;AACrBC,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChBA,0BAAAA,MAAI,MAAM;AAAA,cACT,SAAS,OAAO,SAAS;AACxB,sBAAM,EAAE,MAAK,IAAK,MAAMC,QAAK,MAAC,KAAK,IAAI;AACvCD,8BAAAA,MAAI,eAAe,SAAS,KAAK;AACjC,sBAAM,SAAS,MAAME,QAAAA;AACrB,yBAAS,MAAM,YAAY,OAAO;AAClC,4BAAY,QAAQ;AAAA,cACpB;AAAA,YACN,CAAK;AAAA,UACD;AAAA,QACD;AAAA,MACH,CAAE;AAAA,IACF;AAEAC,kBAAAA,OAAO,YAAS;AACf,UAAGH,cAAAA,MAAI,eAAe,OAAO,KAAK,CAACA,oBAAI,eAAe,UAAU,GAAE;AACjE,cAAM,EAAC,WAAU,SAAQ,IAAI,MAAME,QAAAA,YAAa;AAChD,iBAAS,MAAM,YAAY;AAC3B,iBAAS,MAAM,WAAW;AAAA,MAC5B,WAAUF,cAAG,MAAC,eAAe,OAAO,KAAKA,oBAAI,eAAe,UAAU,GAAE;AACtE,cAAM,EAAC,WAAU,SAAQ,IAAI,KAAK,MAAMA,cAAG,MAAC,eAAe,UAAU,CAAC;AACtE,iBAAS,MAAM,YAAY;AAC3B,iBAAS,MAAM,WAAW;AAAA,MAC1B;AAAA,IACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChLD,GAAG,WAAWI,SAAe;"}