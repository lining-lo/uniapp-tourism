{"version":3,"file":"http.js","sources":["api/http.js"],"sourcesContent":["// api/http.js\r\nconst baseUrl = 'https://m1.apifoxmock.com/m1/4728220-0-default/api';\r\n\r\n// 使用传统function声明（而非箭头函数）\r\nfunction http(url, data = {}, method = 'GET') {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl: baseUrl + url,\r\n\t\t\tdata,\r\n\t\t\tmethod,\r\n\t\t\theader: {\r\n\t\t\t\t'token': uni.getStorageSync('token') || ''\r\n\t\t\t},\r\n\t\t\tsuccess: (result) => {\r\n\t\t\t\tif (result.statusCode === 200) {\r\n\t\t\t\t\tif (result.data.code === 1) {\r\n\t\t\t\t\t\tresolve(result.data.data);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: result.data.msg || '请求失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treject(result.data.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `网络错误：${result.statusCode}`,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treject(`HTTP错误：${result.statusCode}`);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '服务器请求异常',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treject(err);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport default http;"],"names":["uni"],"mappings":";;AACA,MAAM,UAAU;AAGhB,SAAS,KAAK,KAAK,OAAO,CAAA,GAAI,SAAS,OAAO;AAC7C,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvCA,kBAAAA,MAAI,QAAQ;AAAA,MACX,KAAK,UAAU;AAAA,MACf;AAAA,MACA;AAAA,MACA,QAAQ;AAAA,QACP,SAASA,cAAG,MAAC,eAAe,OAAO,KAAK;AAAA,MACxC;AAAA,MACD,SAAS,CAAC,WAAW;AACpB,YAAI,OAAO,eAAe,KAAK;AAC9B,cAAI,OAAO,KAAK,SAAS,GAAG;AAC3B,oBAAQ,OAAO,KAAK,IAAI;AAAA,UAC9B,OAAY;AACNA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO,OAAO,KAAK,OAAO;AAAA,cAC1B,MAAM;AAAA,YACb,CAAO;AACD,mBAAO,OAAO,KAAK,GAAG;AAAA,UACtB;AAAA,QACN,OAAW;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,QAAQ,OAAO,UAAU;AAAA,YAChC,MAAM;AAAA,UACZ,CAAM;AACD,iBAAO,UAAU,OAAO,UAAU,EAAE;AAAA,QACpC;AAAA,MACD;AAAA,MACD,MAAM,CAAC,QAAQ;AACdA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACX,CAAK;AACD,eAAO,GAAG;AAAA,MACV;AAAA,IACJ,CAAG;AAAA,EACH,CAAE;AACF;;"}